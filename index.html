<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>公主结社</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/2.1.12/vuetify.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body>
    <div id="app" style="background: url(https://image.b2bmilestone.com/2a6f31e9cc2a1c99d68e4315872c99870640c76b/000901788_01.jpg) no-repeat center; background-size: cover;">
        <v-container>
            <v-row style="justify-content: center;">
                <v-col cols="12" lg="8" class="text-center">
                    <h3>
                        <b class="white--text">
                            {{ message }}
                        </b>
                    </h3>
                </v-col>
                <v-col cols="12">
                    <v-card color="rgb(255, 255, 255, 0.1)">
                        <v-toolbar flat dark color="rgb(0, 0, 0, 0.8)">
                            <v-toolbar-title>
                                <v-icon left>fab fa-optin-monster</v-icon> 公主结社 战队赛 状况</v-toolbar-title>
                        </v-toolbar>
                        <v-tabs vertical color="rgb(0, 0, 0, 0.8)">
                            <v-tab color="rgb(0, 0, 0, 0.8)">
                                <v-avatar size=" 36 " class="mr-2">
                                    <img src="https://appmedia.jp/wp-content/uploads/2018/03/gateway-4-1.png " alt="John ">
                                </v-avatar>
                                一 王
                            </v-tab>
                            <v-tab color="rgb(0, 0, 0, 0.8)">
                                <v-avatar size="36 " class="mr-2 ">
                                    <img src="https://appmedia.jp/wp-content/uploads/2018/03/gateway-3-1.png " alt="John ">
                                </v-avatar>
                                二 王
                            </v-tab>
                            <v-tab color="rgb(0, 0, 0, 0.8)">
                                <v-avatar size="36 " class="mr-2 ">
                                    <img src="https://appmedia.jp/wp-content/uploads/2018/03/65aebccd53448938bbbdead655016f62.png " alt="John ">
                                </v-avatar>
                                三 王
                            </v-tab>
                            <v-tab color="rgb(0, 0, 0, 0.8)">
                                <v-avatar size="36 " class="mr-2 ">
                                    <img src="https://appmedia.jp/wp-content/uploads/2019/08/89931a0c09c2ad03aad64628979f8bf9.png " alt="John ">
                                </v-avatar>
                                四 王
                            </v-tab>
                            <v-tab color="rgb(0, 0, 0, 0.8)">
                                <v-avatar size="36 " class="mr-2 ">
                                    <img src="https://appmedia.jp/wp-content/uploads/2018/03/4a84f29a534535b5779fec7a9098712a.jpg " alt="John ">
                                </v-avatar>
                                五 王
                            </v-tab>

                            <v-tab-item color="rgb(0, 0, 0, 0.8)">
                                <v-card flat>
                                    <v-card-text>
                                        <v-list subheader color="rgb(255, 255, 255, 0.8)" style="background-color: transparent;">
                                            <v-subheader>正式战</v-subheader>

                                            <v-list-item v-for="item in atkList " :key="item.title " @click=" " class="m-3 ">
                                                <v-list-item-avatar>
                                                    <v-img class="mr-4 " :src="item.avatar "></v-img>
                                                </v-list-item-avatar>

                                                <v-list-item-content>
                                                    <v-list-item-title v-text="item.title "></v-list-item-title>
                                                    <v-col>
                                                        <b v-text="item.dmg " color="red "></b>
                                                    </v-col>
                                                </v-list-item-content>
                                                <v-list-item-action>
                                                    <v-btn>战斗完成</v-btn>
                                                </v-list-item-action>
                                            </v-list-item>
                                        </v-list>

                                        <v-divider></v-divider>

                                        <v-list subheader color="rgb(255, 255, 255, 0.8) ">
                                            <v-subheader>预选 (排队中)</v-subheader>

                                            <v-list-item v-for="item in preAtkList1 " :key="item.title " @click=" " class="m-3 ">
                                                <v-list-item-avatar>
                                                    <v-img class="mr-4 " src="https://i.pinimg.com/originals/5b/45/4d/5b454d2085fe822e04b0d692735d95ec.png"></v-img>
                                                </v-list-item-avatar>

                                                <v-list-item-content>
                                                    <v-list-item-title v-text="item.name "></v-list-item-title>
                                                </v-list-item-content>
                                            </v-list-item>
                                        </v-list>

                                        <v-col cols="12 " class="text-center ">

                                            <v-form v-model="valid" @submit="checkForm">
                                                <v-card color="rgb(255, 255, 255, 0.8) " class="p-3 ">
                                                    <v-container class="p-3 ">
                                                        <v-row>
                                                            <v-col cols="12 ">
                                                                <v-text-field v-model="name " :rules="nameRules " :counter="10 " label="游戏昵称 " required></v-text-field>
                                                            </v-col>
                                                            <v-col cols="12 ">
                                                                <v-text-field v-model="target " v-text="1 " required readonly></v-text-field>
                                                            </v-col>
                                                            <v-col cols="12 ">
                                                                <v-btn :disabled="!valid " class="mr-4 purple darken-2 text-center" @click="createDataTest('小了','abc',1)">
                                                                    提交
                                                                </v-btn>
                                                            </v-col>
                                                        </v-row>
                                                    </v-container>
                                                </v-card>
                                            </v-form>
                                        </v-col>
                                    </v-card-text>
                                </v-card>
                            </v-tab-item>
                        </v-tabs>
                    </v-card>
                </v-col>
            </v-row>
        </v-container>

        <v-footer padless>
            <v-col class="text-center lighten-2 " cols="12 " color="rgb(0, 0, 0, 0.5) ">
                <small>
                     <strong>Power by Hibiki</strong> — &copy;{{ new Date().getFullYear() }}
                </small>
            </v-col>
        </v-footer>

    </div>
</body>
<!-- <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js "></script>
<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-analytics.js "></script>
<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-auth.js "></script> -->
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-firestore.js "></script>
<!-- <script defer src="./js/init-firebase.js"></script> -->


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-select/3.4.0/vue-select.js "></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js "></script>
<script>
    var app = new Vue({
        el: '#app',
        vuetify: new Vuetify(),
        data: {
            valid: true,
            message: '公主结社 报刀系统',
            name: '',
            target: '',
            nameRules: [
                v => !!v || '必须填写正确昵称',
                v => (v && v.length <= 10 && v.length > 2) || '确保昵称是正确的,并且不少于2字',
            ],
            dmgRules: [
                v => !!v || '必须填写伤害',
                v => (v && v.length <= 10) || '伤害不能超过现阶段王的血量',
            ],
            atkList: [{
                active: true,
                title: '起司猫君',
                avatar: 'https://i.pinimg.com/originals/5b/45/4d/5b454d2085fe822e04b0d692735d95ec.png',
                dmg: '战斗中'
            }, ],
            preAtkList1: [],
        },
        beforeCreate() {
            console.log('beforeCreated')
            var firebaseConfig = {
                apiKey: "AIzaSyC0VuR-Bt32-o9yaZWlR7AXWhd7twOqKBs",
                authDomain: "countingdatabase.firebaseapp.com",
                databaseURL: "https://countingdatabase.firebaseio.com",
                projectId: "countingdatabase",
                storageBucket: "countingdatabase.appspot.com",
                messagingSenderId: "155011884318",
                appId: "1:155011884318:web:519e48a2c6dd4187b2550f"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            var db;
            db = firebase.firestore(app);
            let waitingRef = db.collection('waitingList');
            let waitingList = waitingRef.get()
                .then(snapshot => {
                    snapshot.forEach(doc => {
                        if (doc.data().target == 1) {
                            this.preAtkList1.push(doc.data());
                        }
                        console.log(doc.id, '=>', doc.data());
                    });
                })
                .catch(err => {
                    console.log('Error getting documents', err);
                });
        },
        mounted: function() {
            this.$vuetify.theme.primary = '#5E35B1';
            this.$vuetify.theme.success = '#8BC34A';
        },
        methods: {
            validate() {
                console.info(this.form)
                if (this.form.validate()) {
                    this.snackbar = true
                }
                var date = new Date();
                var timestamp = date.getTime();

                function writeUserData(name, target, time) {
                    firebase.database().ref('waitingList/' + userId).set({
                        name: name,
                        target: target,
                        time: timestamp
                    });
                }
            },
            createDataTest(name, message, target) {
                function writeUserData(name, message, target) {
                    firebase.database().ref('users/' + userId).set({
                        username: name,
                        email: message,
                        profile_picture: target
                    });
                }

            },
            checkForm: function(e) {
                if (this.name && this.target) {
                    return true;
                }

                this.errors = [];

                if (!this.name) {
                    this.errors.push('Name required.');
                }
                if (!this.target) {
                    this.errors.push('Age required.');
                }

                var date = new Date();
                var timestamp = date.getTime();

                function writeUserData(name, target, time) {
                    firebase.database().ref('waitingList/').set({
                        name: name,
                        target: target,
                        time: timestamp
                    });
                }
            }
        }
    })
</script>

</html>